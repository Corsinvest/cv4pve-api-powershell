---
external help file: Corsinvest.ProxmoxVE.Api-help.xml
Module Name: Corsinvest.ProxmoxVE.Api
online version:
schema: 2.0.0
---

# New-PveClusterBackup

## SYNOPSIS

## SYNTAX

```
New-PveClusterBackup [[-PveTicket] <PveTicket>] [[-All] <Boolean>] [[-Bwlimit] <Int32>] [[-Comment] <String>]
 [[-Compress] <String>] [[-Dow] <String>] [[-Dumpdir] <String>] [[-Enabled] <Boolean>] [[-Exclude] <String>]
 [[-ExcludePath] <Array>] [[-Fleecing] <String>] [[-Id] <String>] [[-Ionice] <Int32>] [[-Lockwait] <Int32>]
 [[-Mailnotification] <String>] [[-Mailto] <String>] [[-Maxfiles] <Int32>] [[-Mode] <String>]
 [[-Node] <String>] [[-NotesTemplate] <String>] [[-NotificationMode] <String>]
 [[-PbsChangeDetectionMode] <String>] [[-Performance] <String>] [[-Pigz] <Int32>] [[-Pool] <String>]
 [[-Protected] <Boolean>] [[-PruneBackups] <String>] [[-Quiet] <Boolean>] [[-Remove] <Boolean>]
 [[-RepeatMissed] <Boolean>] [[-Schedule] <String>] [[-Script] <String>] [[-Starttime] <String>]
 [[-Stdexcludes] <Boolean>] [[-Stop] <Boolean>] [[-Stopwait] <Int32>] [[-Storage] <String>]
 [[-Tmpdir] <String>] [[-Vmid] <String>] [[-Zstd] <Int32>] [-ProgressAction <ActionPreference>]
 [<CommonParameters>]
```

## DESCRIPTION
Create new vzdump backup job.

## EXAMPLES

### Example 1
```powershell
PS C:\> {{ Add example code here }}
```

{{ Add example description here }}

## PARAMETERS

### -PveTicket
Ticket data connection.

```yaml
Type: PveTicket
Parameter Sets: (All)
Aliases:

Required: False
Position: 1
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -All
Backup all known guest systems on this host.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 2
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Bwlimit
Limit I/O bandwidth (in KiB/s).

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 3
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Comment
Description for the Job.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 4
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Compress
Compress dump file.
Enum: 0,1,gzip,lzo,zstd

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 5
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Dow
Day of week selection.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 6
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Dumpdir
Store resulting files to specified directory.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 7
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Enabled
Enable or disable the job.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 8
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Exclude
Exclude specified guest systems (assumes --all)

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 9
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -ExcludePath
Exclude certain files/directories (shell globs).
Paths starting with '/' are anchored to the container's root, other paths match relative to each subdirectory.

```yaml
Type: Array
Parameter Sets: (All)
Aliases:

Required: False
Position: 10
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Fleecing
Options for backup fleecing (VM only).

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 11
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Id
Job ID (will be autogenerated).

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 12
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Ionice
Set IO priority when using the BFQ scheduler.
For snapshot and suspend mode backups of VMs, this only affects the compressor.
A value of 8 means the idle priority is used, otherwise the best-effort priority is used with the specified value.

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 13
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Lockwait
Maximal time to wait for the global lock (minutes).

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 14
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Mailnotification
Deprecated':' use notification targets/matchers instead.
Specify when to send a notification mail Enum: always,failure

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 15
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Mailto
Deprecated':' Use notification targets/matchers instead.
Comma-separated list of email addresses or users that should receive email notifications.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 16
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Maxfiles
Deprecated':' use 'prune-backups' instead.
Maximal number of backup files per guest system.

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 17
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Mode
Backup mode.
Enum: snapshot,suspend,stop

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 18
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Node
Only run if executed on this node.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 19
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -NotesTemplate
Template string for generating notes for the backup(s).
It can contain variables which will be replaced by their values.
Currently supported are {{cluster}}, {{guestname}}, {{node}}, and {{vmid}}, but more might be added in the future.
Needs to be a single line, newline and backslash need to be escaped as '\n' and '\\\\' respectively.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 20
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -NotificationMode
Determine which notification system to use.
If set to 'legacy-sendmail', vzdump will consider the mailto/mailnotification parameters and send emails to the specified address(es) via the 'sendmail' command.
If set to 'notification-system', a notification will be sent via PVE's notification system, and the mailto and mailnotification will be ignored.
If set to 'auto' (default setting), an email will be sent if mailto is set, and the notification system will be used if not.
Enum: auto,legacy-sendmail,notification-system

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 21
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -PbsChangeDetectionMode
PBS mode used to detect file changes and switch encoding format for container backups.
Enum: legacy,data,metadata

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 22
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Performance
Other performance-related settings.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 23
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Pigz
Use pigz instead of gzip when N\>0.
N=1 uses half of cores, N\>1 uses N as thread count.

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 24
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Pool
Backup all known guest systems included in the specified pool.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 25
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Protected
If true, mark backup(s) as protected.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 26
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -PruneBackups
Use these retention options instead of those from the storage configuration.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 27
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Quiet
Be quiet.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 28
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Remove
Prune older backups according to 'prune-backups'.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 29
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -RepeatMissed
If true, the job will be run as soon as possible if it was missed while the scheduler was not running.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 30
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Schedule
Backup schedule.
The format is a subset of \`systemd\` calendar events.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 31
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Script
Use specified hook script.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 32
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Starttime
Job Start time.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 33
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Stdexcludes
Exclude temporary files and logs.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 34
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Stop
Stop running backup jobs on this host.

```yaml
Type: Boolean
Parameter Sets: (All)
Aliases:

Required: False
Position: 35
Default value: False
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Stopwait
Maximal time to wait until a guest system is stopped (minutes).

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 36
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Storage
Store resulting file to this storage.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 37
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Tmpdir
Store temporary files to specified directory.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 38
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Vmid
The ID of the guest system you want to backup.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 39
Default value: None
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -Zstd
Zstd threads.
N=0 uses half of the available cores, if N is set to a value bigger than 0, N is used as thread count.

```yaml
Type: Int32
Parameter Sets: (All)
Aliases:

Required: False
Position: 40
Default value: 0
Accept pipeline input: True (ByPropertyName)
Accept wildcard characters: False
```

### -ProgressAction
{{ Fill ProgressAction Description }}

```yaml
Type: ActionPreference
Parameter Sets: (All)
Aliases: proga

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### CommonParameters
This cmdlet supports the common parameters: -Debug, -ErrorAction, -ErrorVariable, -InformationAction, -InformationVariable, -OutVariable, -OutBuffer, -PipelineVariable, -Verbose, -WarningAction, and -WarningVariable. For more information, see [about_CommonParameters](http://go.microsoft.com/fwlink/?LinkID=113216).

## INPUTS

## OUTPUTS

### PveResponse. Return response.
## NOTES

## RELATED LINKS
